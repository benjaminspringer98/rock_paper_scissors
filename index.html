<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>

    <script>

        let playerPoints = 0;
        let computerPoints = 0;

        function game() {
            /* play 5 rounds */
            for (let i = 0; i<=4; i++) {
                let playerSelection = prompt("Choose Rock, Paper or Scissors");
                let computerSelection = computerPlay(); 
                console.log(playRound(playerSelection, computerSelection));
            }

            /* check who won */
            if (playerPoints > computerPoints) {
                console.log("You win with " + playerPoints + " points against " + computerPoints + "!");
            }
            else if (playerPoints === computerPoints) {
                console.log("The game ends in a tie!");
            }
            else 
                console.log("You lose with " + playerPoints + " points against " + computerPoints + "!");
        }

        function playRound(playerSelection, computerSelection) {
            /* transform inputs like "roCK", "ROCK", "rock" into "Rock" (only first letter uppercase) */
           playerSelection = normalize(playerSelection);
           computerSelection = normalize(computerSelection);

           if (playerSelection === "Rock" && computerSelection === "Scissors"
           || playerSelection === "Paper" && computerSelection === "Rock"
           || playerSelection === "Scissors" && computerSelection === "Paper") {
               playerPoints++;
               return "You win the round! " + playerSelection + " beats " + computerSelection;
           }

           else if (playerSelection === computerSelection) {
               return "It's a tie!"
           }

           else {
               computerPoints++;
               return "You lose the round! " + computerSelection + " beats " + playerSelection;
           }

        }

        function computerPlay() {
            let number = getRandomInt(3); // number can be 0, 1, or 2
            console.log(number);
            
            if (number === 0) {
                return "Rock";
            }      
            else if (number === 1) {
                return "Paper";
            }
            else {
                return "Scissors";
            }
        }

        /* returns random int between 0 (inclusive) and max (exclusive) */
        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

        /* returns string with only the first letter capitalized */
        function normalize(string) {
            return string[0].toUpperCase() + string.slice(1).toLowerCase();
        }

        // run the game:
        game();
    </script>
    
</body>
</html>